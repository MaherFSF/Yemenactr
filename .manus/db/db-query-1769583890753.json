{
  "query": "-- Add new columns to source_credentials\nALTER TABLE source_credentials \nADD COLUMN IF NOT EXISTS validationMessage text,\nADD COLUMN IF NOT EXISTS expiresAt timestamp,\nADD COLUMN IF NOT EXISTS rateLimit int,\nADD COLUMN IF NOT EXISTS rateLimitPeriod varchar(50);\n\n-- Create source_contacts table\nCREATE TABLE IF NOT EXISTS source_contacts (\n  id int AUTO_INCREMENT NOT NULL,\n  sourceId int NOT NULL,\n  contactType enum('api_support','data_team','general','partnership') NOT NULL,\n  contactName varchar(255),\n  email varchar(320),\n  phone varchar(50),\n  department varchar(255),\n  role varchar(255),\n  notes text,\n  isPrimary boolean NOT NULL DEFAULT false,\n  isActive boolean NOT NULL DEFAULT true,\n  createdAt timestamp NOT NULL DEFAULT (now()),\n  updatedAt timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT source_contacts_id PRIMARY KEY(id),\n  INDEX source_contact_source_idx(sourceId),\n  INDEX source_contact_email_idx(email),\n  INDEX source_contact_primary_idx(isPrimary)\n);\n\n-- Create api_registration_instructions table\nCREATE TABLE IF NOT EXISTS api_registration_instructions (\n  id int AUTO_INCREMENT NOT NULL,\n  sourceId int NOT NULL,\n  registrationUrl text NOT NULL,\n  documentationUrl text,\n  credentialType enum('api_key','oauth_token','basic_auth','certificate') NOT NULL,\n  steps json NOT NULL,\n  requiresInstitutionalEmail boolean NOT NULL DEFAULT false,\n  requiresApproval boolean NOT NULL DEFAULT false,\n  approvalTimeline varchar(100),\n  requiresPayment boolean NOT NULL DEFAULT false,\n  pricingInfo text,\n  keyFormat varchar(255),\n  keyLocation varchar(100),\n  keyHeaderName varchar(100),\n  exampleRequest text,\n  defaultRateLimit int,\n  rateLimitPeriod varchar(50),\n  rateLimitNotes text,\n  commonIssues json,\n  tipsAndTricks json,\n  lastVerifiedAt timestamp,\n  verifiedBy varchar(64),\n  createdAt timestamp NOT NULL DEFAULT (now()),\n  updatedAt timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT api_registration_instructions_id PRIMARY KEY(id),\n  INDEX api_reg_source_idx(sourceId),\n  INDEX api_reg_cred_type_idx(credentialType)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 4DB9hJWqLzCzJpD.4ae2ba9639dc --database XodoyKMzPdFiKkVj3QFTGK --execute -- Add new columns to source_credentials\nALTER TABLE source_credentials \nADD COLUMN IF NOT EXISTS validationMessage text,\nADD COLUMN IF NOT EXISTS expiresAt timestamp,\nADD COLUMN IF NOT EXISTS rateLimit int,\nADD COLUMN IF NOT EXISTS rateLimitPeriod varchar(50);\n\n-- Create source_contacts table\nCREATE TABLE IF NOT EXISTS source_contacts (\n  id int AUTO_INCREMENT NOT NULL,\n  sourceId int NOT NULL,\n  contactType enum('api_support','data_team','general','partnership') NOT NULL,\n  contactName varchar(255),\n  email varchar(320),\n  phone varchar(50),\n  department varchar(255),\n  role varchar(255),\n  notes text,\n  isPrimary boolean NOT NULL DEFAULT false,\n  isActive boolean NOT NULL DEFAULT true,\n  createdAt timestamp NOT NULL DEFAULT (now()),\n  updatedAt timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT source_contacts_id PRIMARY KEY(id),\n  INDEX source_contact_source_idx(sourceId),\n  INDEX source_contact_email_idx(email),\n  INDEX source_contact_primary_idx(isPrimary)\n);\n\n-- Create api_registration_instructions table\nCREATE TABLE IF NOT EXISTS api_registration_instructions (\n  id int AUTO_INCREMENT NOT NULL,\n  sourceId int NOT NULL,\n  registrationUrl text NOT NULL,\n  documentationUrl text,\n  credentialType enum('api_key','oauth_token','basic_auth','certificate') NOT NULL,\n  steps json NOT NULL,\n  requiresInstitutionalEmail boolean NOT NULL DEFAULT false,\n  requiresApproval boolean NOT NULL DEFAULT false,\n  approvalTimeline varchar(100),\n  requiresPayment boolean NOT NULL DEFAULT false,\n  pricingInfo text,\n  keyFormat varchar(255),\n  keyLocation varchar(100),\n  keyHeaderName varchar(100),\n  exampleRequest text,\n  defaultRateLimit int,\n  rateLimitPeriod varchar(50),\n  rateLimitNotes text,\n  commonIssues json,\n  tipsAndTricks json,\n  lastVerifiedAt timestamp,\n  verifiedBy varchar(64),\n  createdAt timestamp NOT NULL DEFAULT (now()),\n  updatedAt timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT api_registration_instructions_id PRIMARY KEY(id),\n  INDEX api_reg_source_idx(sourceId),\n  INDEX api_reg_cred_type_idx(credentialType)\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 3506
}