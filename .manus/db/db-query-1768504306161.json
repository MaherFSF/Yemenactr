{
  "query": "\n-- Create notification_preferences_enhanced table (without JSON defaults)\nCREATE TABLE IF NOT EXISTS notification_preferences_enhanced (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  userId INT,\n  email VARCHAR(320) NOT NULL,\n  exchangeRateAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  exchangeRateThreshold DECIMAL(5,2) DEFAULT 2.00,\n  exchangeRateRegions JSON,\n  bankingAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  tradeAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  energyAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  foodSecurityAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  humanitarianAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  fiscalAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  macroeconomicAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  newPublicationsAlert BOOLEAN DEFAULT TRUE NOT NULL,\n  publicationCategories JSON,\n  publicationOrganizations JSON,\n  weeklyDigest BOOLEAN DEFAULT TRUE NOT NULL,\n  weeklyDigestDay ENUM('monday','tuesday','wednesday','thursday','friday','saturday','sunday') DEFAULT 'monday',\n  monthlyReport BOOLEAN DEFAULT TRUE NOT NULL,\n  monthlyReportDay INT DEFAULT 1,\n  quarterlyReport BOOLEAN DEFAULT TRUE NOT NULL,\n  annualReport BOOLEAN DEFAULT TRUE NOT NULL,\n  preferredLanguage ENUM('en','ar','both') DEFAULT 'both' NOT NULL,\n  reportFormat ENUM('pdf','html','both') DEFAULT 'pdf' NOT NULL,\n  includeCharts BOOLEAN DEFAULT TRUE NOT NULL,\n  includeDataTables BOOLEAN DEFAULT TRUE NOT NULL,\n  deliveryFrequency ENUM('immediate','daily_digest','weekly_digest') DEFAULT 'daily_digest' NOT NULL,\n  quietHoursStart INT,\n  quietHoursEnd INT,\n  timezone VARCHAR(50) DEFAULT 'Asia/Aden',\n  isVerified BOOLEAN DEFAULT FALSE NOT NULL,\n  verificationToken VARCHAR(64),\n  verifiedAt TIMESTAMP NULL,\n  unsubscribeToken VARCHAR(64) NOT NULL,\n  isActive BOOLEAN DEFAULT TRUE NOT NULL,\n  unsubscribedAt TIMESTAMP NULL,\n  unsubscribeReason TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX notification_user_idx (userId),\n  INDEX notification_email_idx (email),\n  INDEX notification_active_idx (isActive),\n  INDEX notification_verification_idx (verificationToken),\n  FOREIGN KEY (userId) REFERENCES users(id)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 4DB9hJWqLzCzJpD.4ae2ba9639dc --database XodoyKMzPdFiKkVj3QFTGK --execute \n-- Create notification_preferences_enhanced table (without JSON defaults)\nCREATE TABLE IF NOT EXISTS notification_preferences_enhanced (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  userId INT,\n  email VARCHAR(320) NOT NULL,\n  exchangeRateAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  exchangeRateThreshold DECIMAL(5,2) DEFAULT 2.00,\n  exchangeRateRegions JSON,\n  bankingAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  tradeAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  energyAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  foodSecurityAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  humanitarianAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  fiscalAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  macroeconomicAlerts BOOLEAN DEFAULT TRUE NOT NULL,\n  newPublicationsAlert BOOLEAN DEFAULT TRUE NOT NULL,\n  publicationCategories JSON,\n  publicationOrganizations JSON,\n  weeklyDigest BOOLEAN DEFAULT TRUE NOT NULL,\n  weeklyDigestDay ENUM('monday','tuesday','wednesday','thursday','friday','saturday','sunday') DEFAULT 'monday',\n  monthlyReport BOOLEAN DEFAULT TRUE NOT NULL,\n  monthlyReportDay INT DEFAULT 1,\n  quarterlyReport BOOLEAN DEFAULT TRUE NOT NULL,\n  annualReport BOOLEAN DEFAULT TRUE NOT NULL,\n  preferredLanguage ENUM('en','ar','both') DEFAULT 'both' NOT NULL,\n  reportFormat ENUM('pdf','html','both') DEFAULT 'pdf' NOT NULL,\n  includeCharts BOOLEAN DEFAULT TRUE NOT NULL,\n  includeDataTables BOOLEAN DEFAULT TRUE NOT NULL,\n  deliveryFrequency ENUM('immediate','daily_digest','weekly_digest') DEFAULT 'daily_digest' NOT NULL,\n  quietHoursStart INT,\n  quietHoursEnd INT,\n  timezone VARCHAR(50) DEFAULT 'Asia/Aden',\n  isVerified BOOLEAN DEFAULT FALSE NOT NULL,\n  verificationToken VARCHAR(64),\n  verifiedAt TIMESTAMP NULL,\n  unsubscribeToken VARCHAR(64) NOT NULL,\n  isActive BOOLEAN DEFAULT TRUE NOT NULL,\n  unsubscribedAt TIMESTAMP NULL,\n  unsubscribeReason TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX notification_user_idx (userId),\n  INDEX notification_email_idx (email),\n  INDEX notification_active_idx (isActive),\n  INDEX notification_verification_idx (verificationToken),\n  FOREIGN KEY (userId) REFERENCES users(id)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2066
}