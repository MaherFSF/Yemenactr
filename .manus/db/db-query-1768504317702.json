{
  "query": "\n-- Create scheduled_report_deliveries table\nCREATE TABLE IF NOT EXISTS scheduled_report_deliveries (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  reportType ENUM('weekly_digest','monthly_report','quarterly_report','annual_report','custom_report','alert_digest') NOT NULL,\n  reportPeriodStart TIMESTAMP NOT NULL,\n  reportPeriodEnd TIMESTAMP NOT NULL,\n  reportTitle VARCHAR(255) NOT NULL,\n  reportTitleAr VARCHAR(255),\n  pdfFileKey VARCHAR(255),\n  pdfFileUrl TEXT,\n  htmlFileKey VARCHAR(255),\n  htmlFileUrl TEXT,\n  generationStatus ENUM('pending','generating','completed','failed') DEFAULT 'pending' NOT NULL,\n  generatedAt TIMESTAMP NULL,\n  generationError TEXT,\n  totalRecipients INT DEFAULT 0 NOT NULL,\n  deliveredCount INT DEFAULT 0 NOT NULL,\n  failedCount INT DEFAULT 0 NOT NULL,\n  openedCount INT DEFAULT 0 NOT NULL,\n  clickedCount INT DEFAULT 0 NOT NULL,\n  scheduledFor TIMESTAMP NOT NULL,\n  deliveryStartedAt TIMESTAMP NULL,\n  deliveryCompletedAt TIMESTAMP NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX scheduled_report_type_idx (reportType),\n  INDEX scheduled_for_idx (scheduledFor),\n  INDEX generation_status_idx (generationStatus)\n);\n\n-- Create institutional_subscribers table\nCREATE TABLE IF NOT EXISTS institutional_subscribers (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  organizationName VARCHAR(255) NOT NULL,\n  organizationNameAr VARCHAR(255),\n  organizationType ENUM('donor','un_agency','ngo','government','central_bank','commercial_bank','research_institution','media','embassy','other') NOT NULL,\n  primaryContactName VARCHAR(255) NOT NULL,\n  primaryContactEmail VARCHAR(320) NOT NULL,\n  secondaryContactEmail VARCHAR(320),\n  subscriptionTier ENUM('basic','professional','enterprise') DEFAULT 'basic' NOT NULL,\n  customReportAccess BOOLEAN DEFAULT FALSE NOT NULL,\n  apiAccess BOOLEAN DEFAULT FALSE NOT NULL,\n  receiveWeeklyDigest BOOLEAN DEFAULT TRUE NOT NULL,\n  receiveMonthlyReport BOOLEAN DEFAULT TRUE NOT NULL,\n  receiveQuarterlyReport BOOLEAN DEFAULT TRUE NOT NULL,\n  receiveAnnualReport BOOLEAN DEFAULT TRUE NOT NULL,\n  preferredLanguage ENUM('en','ar','both') DEFAULT 'both' NOT NULL,\n  interestedSectors JSON,\n  interestedIndicators JSON,\n  isActive BOOLEAN DEFAULT TRUE NOT NULL,\n  activatedAt TIMESTAMP NULL,\n  deactivatedAt TIMESTAMP NULL,\n  notes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX inst_org_name_idx (organizationName),\n  INDEX inst_org_type_idx (organizationType),\n  INDEX inst_primary_email_idx (primaryContactEmail),\n  INDEX inst_active_idx (isActive)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 4DB9hJWqLzCzJpD.4ae2ba9639dc --database XodoyKMzPdFiKkVj3QFTGK --execute \n-- Create scheduled_report_deliveries table\nCREATE TABLE IF NOT EXISTS scheduled_report_deliveries (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  reportType ENUM('weekly_digest','monthly_report','quarterly_report','annual_report','custom_report','alert_digest') NOT NULL,\n  reportPeriodStart TIMESTAMP NOT NULL,\n  reportPeriodEnd TIMESTAMP NOT NULL,\n  reportTitle VARCHAR(255) NOT NULL,\n  reportTitleAr VARCHAR(255),\n  pdfFileKey VARCHAR(255),\n  pdfFileUrl TEXT,\n  htmlFileKey VARCHAR(255),\n  htmlFileUrl TEXT,\n  generationStatus ENUM('pending','generating','completed','failed') DEFAULT 'pending' NOT NULL,\n  generatedAt TIMESTAMP NULL,\n  generationError TEXT,\n  totalRecipients INT DEFAULT 0 NOT NULL,\n  deliveredCount INT DEFAULT 0 NOT NULL,\n  failedCount INT DEFAULT 0 NOT NULL,\n  openedCount INT DEFAULT 0 NOT NULL,\n  clickedCount INT DEFAULT 0 NOT NULL,\n  scheduledFor TIMESTAMP NOT NULL,\n  deliveryStartedAt TIMESTAMP NULL,\n  deliveryCompletedAt TIMESTAMP NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX scheduled_report_type_idx (reportType),\n  INDEX scheduled_for_idx (scheduledFor),\n  INDEX generation_status_idx (generationStatus)\n);\n\n-- Create institutional_subscribers table\nCREATE TABLE IF NOT EXISTS institutional_subscribers (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  organizationName VARCHAR(255) NOT NULL,\n  organizationNameAr VARCHAR(255),\n  organizationType ENUM('donor','un_agency','ngo','government','central_bank','commercial_bank','research_institution','media','embassy','other') NOT NULL,\n  primaryContactName VARCHAR(255) NOT NULL,\n  primaryContactEmail VARCHAR(320) NOT NULL,\n  secondaryContactEmail VARCHAR(320),\n  subscriptionTier ENUM('basic','professional','enterprise') DEFAULT 'basic' NOT NULL,\n  customReportAccess BOOLEAN DEFAULT FALSE NOT NULL,\n  apiAccess BOOLEAN DEFAULT FALSE NOT NULL,\n  receiveWeeklyDigest BOOLEAN DEFAULT TRUE NOT NULL,\n  receiveMonthlyReport BOOLEAN DEFAULT TRUE NOT NULL,\n  receiveQuarterlyReport BOOLEAN DEFAULT TRUE NOT NULL,\n  receiveAnnualReport BOOLEAN DEFAULT TRUE NOT NULL,\n  preferredLanguage ENUM('en','ar','both') DEFAULT 'both' NOT NULL,\n  interestedSectors JSON,\n  interestedIndicators JSON,\n  isActive BOOLEAN DEFAULT TRUE NOT NULL,\n  activatedAt TIMESTAMP NULL,\n  deactivatedAt TIMESTAMP NULL,\n  notes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX inst_org_name_idx (organizationName),\n  INDEX inst_org_type_idx (organizationType),\n  INDEX inst_primary_email_idx (primaryContactEmail),\n  INDEX inst_active_idx (isActive)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2536
}