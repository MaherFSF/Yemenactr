{
  "query": "CREATE TABLE IF NOT EXISTS claim_sets (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  purpose ENUM('page_view','report','export','api_response') NOT NULL,\n  pageRoute VARCHAR(255),\n  evidenceSetHash VARCHAR(64),\n  claimIds JSON,\n  generatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  generatedByUserId INT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX claim_set_purpose_idx (purpose),\n  INDEX claim_set_page_idx (pageRoute)\n);\n\nCREATE TABLE IF NOT EXISTS conflicts (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  conflictType ENUM('value_mismatch','date_mismatch','source_contradiction','methodology_difference') NOT NULL,\n  subjectType VARCHAR(50) NOT NULL,\n  subjectId VARCHAR(100) NOT NULL,\n  description TEXT NOT NULL,\n  descriptionAr TEXT,\n  claimIds JSON,\n  status ENUM('detected','under_review','resolved','accepted') DEFAULT 'detected' NOT NULL,\n  resolution TEXT,\n  resolvedClaimId VARCHAR(36),\n  resolvedByUserId INT,\n  resolvedAt TIMESTAMP NULL,\n  severity ENUM('low','medium','high','critical') DEFAULT 'medium' NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX conflict_type_idx (conflictType),\n  INDEX conflict_subject_idx (subjectType, subjectId),\n  INDEX conflict_status_idx (status),\n  INDEX conflict_severity_idx (severity)\n);\n\nCREATE TABLE IF NOT EXISTS entities (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  entityType ENUM('central_bank','commercial_bank','mfi','exchange_company','government_ministry','customs_authority','tax_authority','un_agency','ingo','donor','company','political_party','armed_group','governorate','city','other') NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  nameAr VARCHAR(255),\n  acronym VARCHAR(50),\n  description TEXT,\n  descriptionAr TEXT,\n  regimeTag ENUM('aden_irg','sanaa_defacto','mixed','neutral','unknown'),\n  parentEntityId INT,\n  headquarters VARCHAR(255),\n  website TEXT,\n  status ENUM('active','inactive','dissolved','sanctioned','unknown') DEFAULT 'active' NOT NULL,\n  establishedDate TIMESTAMP NULL,\n  dissolvedDate TIMESTAMP NULL,\n  logoUrl TEXT,\n  metadata JSON,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX entity_type_idx (entityType),\n  INDEX entity_name_idx (name),\n  INDEX entity_regime_idx (regimeTag),\n  INDEX entity_status_idx (status)\n);\n\nCREATE TABLE IF NOT EXISTS entity_links (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  sourceEntityId INT NOT NULL,\n  targetEntityId INT NOT NULL,\n  relationshipType ENUM('parent_of','subsidiary_of','partner_with','regulates','funds','contracts_with','competes_with','affiliated_with','other') NOT NULL,\n  description TEXT,\n  startDate TIMESTAMP NULL,\n  endDate TIMESTAMP NULL,\n  isActive BOOLEAN DEFAULT TRUE NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX entity_link_source_idx (sourceEntityId),\n  INDEX entity_link_target_idx (targetEntityId),\n  INDEX entity_link_type_idx (relationshipType),\n  FOREIGN KEY (sourceEntityId) REFERENCES entities(id),\n  FOREIGN KEY (targetEntityId) REFERENCES entities(id)\n);\n\nCREATE TABLE IF NOT EXISTS regulations (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  regulationType ENUM('law','decree','circular','directive','resolution','guideline','memorandum','other') NOT NULL,\n  referenceNumber VARCHAR(100),\n  title VARCHAR(500) NOT NULL,\n  titleAr VARCHAR(500),\n  summary TEXT,\n  summaryAr TEXT,\n  fullText TEXT,\n  fullTextAr TEXT,\n  issuingEntityId INT,\n  issuingAuthority VARCHAR(255),\n  issuedDate TIMESTAMP NULL,\n  effectiveDate TIMESTAMP NULL,\n  expiryDate TIMESTAMP NULL,\n  regimeTag ENUM('aden_irg','sanaa_defacto','mixed','unknown'),\n  affectedSectors JSON,\n  affectedIndicators JSON,\n  status ENUM('draft','active','superseded','repealed','expired') DEFAULT 'active' NOT NULL,\n  supersededById INT,\n  documentId INT,\n  sourceUrl TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX regulation_type_idx (regulationType),\n  INDEX regulation_ref_idx (referenceNumber),\n  INDEX regulation_issued_idx (issuedDate),\n  INDEX regulation_regime_idx (regimeTag),\n  INDEX regulation_status_idx (status)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 4DB9hJWqLzCzJpD.4ae2ba9639dc --database XodoyKMzPdFiKkVj3QFTGK --execute CREATE TABLE IF NOT EXISTS claim_sets (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  purpose ENUM('page_view','report','export','api_response') NOT NULL,\n  pageRoute VARCHAR(255),\n  evidenceSetHash VARCHAR(64),\n  claimIds JSON,\n  generatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  generatedByUserId INT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX claim_set_purpose_idx (purpose),\n  INDEX claim_set_page_idx (pageRoute)\n);\n\nCREATE TABLE IF NOT EXISTS conflicts (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  conflictType ENUM('value_mismatch','date_mismatch','source_contradiction','methodology_difference') NOT NULL,\n  subjectType VARCHAR(50) NOT NULL,\n  subjectId VARCHAR(100) NOT NULL,\n  description TEXT NOT NULL,\n  descriptionAr TEXT,\n  claimIds JSON,\n  status ENUM('detected','under_review','resolved','accepted') DEFAULT 'detected' NOT NULL,\n  resolution TEXT,\n  resolvedClaimId VARCHAR(36),\n  resolvedByUserId INT,\n  resolvedAt TIMESTAMP NULL,\n  severity ENUM('low','medium','high','critical') DEFAULT 'medium' NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX conflict_type_idx (conflictType),\n  INDEX conflict_subject_idx (subjectType, subjectId),\n  INDEX conflict_status_idx (status),\n  INDEX conflict_severity_idx (severity)\n);\n\nCREATE TABLE IF NOT EXISTS entities (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  entityType ENUM('central_bank','commercial_bank','mfi','exchange_company','government_ministry','customs_authority','tax_authority','un_agency','ingo','donor','company','political_party','armed_group','governorate','city','other') NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  nameAr VARCHAR(255),\n  acronym VARCHAR(50),\n  description TEXT,\n  descriptionAr TEXT,\n  regimeTag ENUM('aden_irg','sanaa_defacto','mixed','neutral','unknown'),\n  parentEntityId INT,\n  headquarters VARCHAR(255),\n  website TEXT,\n  status ENUM('active','inactive','dissolved','sanctioned','unknown') DEFAULT 'active' NOT NULL,\n  establishedDate TIMESTAMP NULL,\n  dissolvedDate TIMESTAMP NULL,\n  logoUrl TEXT,\n  metadata JSON,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX entity_type_idx (entityType),\n  INDEX entity_name_idx (name),\n  INDEX entity_regime_idx (regimeTag),\n  INDEX entity_status_idx (status)\n);\n\nCREATE TABLE IF NOT EXISTS entity_links (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  sourceEntityId INT NOT NULL,\n  targetEntityId INT NOT NULL,\n  relationshipType ENUM('parent_of','subsidiary_of','partner_with','regulates','funds','contracts_with','competes_with','affiliated_with','other') NOT NULL,\n  description TEXT,\n  startDate TIMESTAMP NULL,\n  endDate TIMESTAMP NULL,\n  isActive BOOLEAN DEFAULT TRUE NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX entity_link_source_idx (sourceEntityId),\n  INDEX entity_link_target_idx (targetEntityId),\n  INDEX entity_link_type_idx (relationshipType),\n  FOREIGN KEY (sourceEntityId) REFERENCES entities(id),\n  FOREIGN KEY (targetEntityId) REFERENCES entities(id)\n);\n\nCREATE TABLE IF NOT EXISTS regulations (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  regulationType ENUM('law','decree','circular','directive','resolution','guideline','memorandum','other') NOT NULL,\n  referenceNumber VARCHAR(100),\n  title VARCHAR(500) NOT NULL,\n  titleAr VARCHAR(500),\n  summary TEXT,\n  summaryAr TEXT,\n  fullText TEXT,\n  fullTextAr TEXT,\n  issuingEntityId INT,\n  issuingAuthority VARCHAR(255),\n  issuedDate TIMESTAMP NULL,\n  effectiveDate TIMESTAMP NULL,\n  expiryDate TIMESTAMP NULL,\n  regimeTag ENUM('aden_irg','sanaa_defacto','mixed','unknown'),\n  affectedSectors JSON,\n  affectedIndicators JSON,\n  status ENUM('draft','active','superseded','repealed','expired') DEFAULT 'active' NOT NULL,\n  supersededById INT,\n  documentId INT,\n  sourceUrl TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX regulation_type_idx (regulationType),\n  INDEX regulation_ref_idx (referenceNumber),\n  INDEX regulation_issued_idx (issuedDate),\n  INDEX regulation_regime_idx (regimeTag),\n  INDEX regulation_status_idx (status)\n);",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 81: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 9 column 17 near \",",
    "  fullTextAr TEXT,",
    "  issuingEntityId INT,",
    "  issuingAuthority VARCHAR(255),",
    "  issuedDate TIMESTAMP NULL,",
    "  effectiveDate TIMESTAMP NULL,",
    "  expiryDate TIMESTAMP NULL,",
    "  regimeTag ENUM('aden_irg','sanaa_defacto','mixed','unknown'),",
    "  affectedSectors JSON,",
    "  affectedIndicators JSON,",
    "  status ENUM('draft','active','superseded','repealed','expired') DEFAULT 'active' NO"
  ]
}