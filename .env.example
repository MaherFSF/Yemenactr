# YETO Platform - Environment Variables Template
# Copy this file to .env and fill in your values
# See docs/ENV_VARS.md for detailed documentation

# ============================================
# REQUIRED - Core Application
# ============================================

# Database connection string
# Format: mysql://username:password@host:port/database
# Example: mysql://yeto:yeto_password@localhost:3306/yeto
DATABASE_URL=mysql://yeto:yeto_password@localhost:3306/yeto

# JWT secret for authentication (CHANGE THIS IN PRODUCTION!)
# Generate strong secret: openssl rand -base64 64
# Minimum 32 characters recommended, 64+ for production
JWT_SECRET=CHANGE-THIS-TO-A-STRONG-RANDOM-STRING-64-CHARS

# Runtime environment (development, production, test)
NODE_ENV=development

# ============================================
# OPTIONAL - Server Configuration
# ============================================

# Server port (default: 3000, auto-finds next available if busy)
PORT=3000

# ============================================
# OPTIONAL - OAuth & Authentication
# ============================================

# OAuth provider URL for external authentication
# OAUTH_SERVER_URL=

# Platform owner's OpenID for admin access
# OWNER_OPEN_ID=

# Application ID for OAuth flow
# VITE_APP_ID=

# ============================================
# OPTIONAL - AI / LLM Integration
# ============================================

# AI API key (OpenAI, Azure OpenAI, or compatible provider)
# AI_API_KEY=

# AI API endpoint URL
# AI_API_URL=https://api.openai.com/v1

# LLM model name
# AI_MODEL=gpt-4o

# Embedding model for vector operations
# AI_EMBED_MODEL=text-embedding-3-small

# ============================================
# OPTIONAL - Storage (Choose one option)
# ============================================

# Option A: Forge Proxy Storage (Recommended)
# Built-in storage proxy for document/asset management
# BUILT_IN_FORGE_API_URL=
# BUILT_IN_FORGE_API_KEY=

# Option B: Direct S3 / MinIO Storage
# S3-compatible object storage (MinIO for local, AWS S3 for production)
# S3_ENDPOINT=http://localhost:9000
# S3_ACCESS_KEY=minioadmin
# S3_SECRET_KEY=minioadmin
# S3_BUCKET=yeto-storage

# ============================================
# OPTIONAL - Cache / Redis
# ============================================

# Redis connection URL for caching and sessions
# Format: redis://[username:password@]host:port[/database]
# REDIS_URL=redis://localhost:6379

# ============================================
# OPTIONAL - Search / OpenSearch
# ============================================

# OpenSearch endpoint for full-text search
# OPENSEARCH_URL=http://localhost:9200

# ============================================
# OPTIONAL - Analytics
# ============================================

# Analytics service endpoint (Umami or similar)
# VITE_ANALYTICS_ENDPOINT=

# Analytics website/project ID
# VITE_ANALYTICS_WEBSITE_ID=

# ============================================
# OPTIONAL - Data Connectors
# ============================================

# ACLED API key (required if enabling ACLED conflict data connector)
# Register at: https://developer.acleddata.com/
# Status: Currently blocked due to missing key
# ACLED_API_KEY=

# HDX HAPI API key (optional, public endpoints available without key)
# HDX_API_KEY=

# ============================================
# DEVELOPMENT - Docker Compose Defaults
# ============================================
# These are set automatically by docker-compose.yml
# Only needed if running services outside Docker

# MySQL credentials (from docker-compose.yml)
# MYSQL_ROOT_PASSWORD=root_password
# MYSQL_DATABASE=yeto
# MYSQL_USER=yeto
# MYSQL_PASSWORD=yeto_password

# MinIO credentials (from docker-compose.yml)
# MINIO_ROOT_USER=minioadmin
# MINIO_ROOT_PASSWORD=minioadmin

# ============================================
# PRODUCTION - Additional Security
# ============================================

# For production deployments, also consider:
# - Use strong, unique JWT_SECRET (64+ characters)
# - Enable SSL/TLS for all connections
# - Use environment-specific API keys
# - Configure proper backup retention
# - Set up monitoring and alerting
# - Use secret management service (AWS Secrets Manager, Vault, etc.)

# ============================================
# USAGE INSTRUCTIONS
# ============================================

# 1. Copy this file:
#    cp .env.example .env

# 2. Edit .env with your actual values:
#    - Required: DATABASE_URL, JWT_SECRET, NODE_ENV
#    - Optional: Configure services as needed

# 3. Never commit .env to git (already in .gitignore)

# 4. For detailed documentation, see:
#    docs/ENV_VARS.md - Complete variable reference
#    docs/ENGINEERING_BASELINE.md - Setup guide

# 5. Test your configuration:
#    pnpm install
#    pnpm run dev

# ============================================
# QUICK START - Local Development
# ============================================

# Minimum setup for local development:
# 1. Start Docker services: docker-compose up -d
# 2. Copy this file: cp .env.example .env
# 3. Set DATABASE_URL and JWT_SECRET in .env
# 4. Run migrations: pnpm run db:push
# 5. Start dev server: pnpm run dev

# The application will be available at http://localhost:3000

# ============================================
# CONNECTOR STATUS
# ============================================

# The following data connectors are active and work without API keys:
# âœ… World Bank Development Indicators
# âœ… IMF International Financial Statistics
# âœ… FAO/FAOSTAT Agricultural Data
# âœ… OCHA Financial Tracking Service
# âœ… HDX HAPI Humanitarian Data
# âœ… ReliefWeb Reports
# âœ… IATI Aid Transparency
# âœ… UNHCR Refugee Data
# âœ… WHO Health Indicators
# âœ… UNICEF Child Welfare
# âœ… WFP Food Security
# âœ… UNDP Human Development
# âœ… Central Bank of Yemen (Aden & Sana'a)

# Connectors requiring API keys:
# ðŸ”´ ACLED (conflict data) - Currently blocked
#    Register at: https://developer.acleddata.com/
#    Alternative: UCDP connector is active (no key required)

# ============================================
# TROUBLESHOOTING
# ============================================

# Database connection fails:
# - Verify DATABASE_URL format
# - Check MySQL is running: docker-compose ps db
# - Test connection: mysql -h localhost -u yeto -p

# Port 3000 already in use:
# - Server auto-selects next available port
# - Check console output for actual port
# - Or set PORT=3001 (or any available port)

# JWT/Auth errors:
# - Ensure JWT_SECRET is set
# - Must be at least 32 characters
# - Change default in production

# For more help, see docs/ENGINEERING_BASELINE.md
